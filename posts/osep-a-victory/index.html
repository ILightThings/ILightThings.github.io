<!doctype html>
<html lang="en-us">
  <head>
    <title>OSEP a Victory // iLightThings: A site</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="iLightThings" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://ilightthings.github.io/css/main.min.4a7ec8660f9a44b08c4da97c5f2e31b1192df1d4d0322e65c0dbbc6ecb1b863f.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OSEP a Victory"/>
<meta name="twitter:description" content="So I just recently passed the PEN-300 course and got my OSEP. It was a truly fun but difficult journey. I wanted to briefly write a few things down before I forget them in hopes that they might help someone in the future.
The Timeline So, I will admit fault here; I slacked off for a bunch of months. I bought the course back in January and had a year-long access pass."/>

    <meta property="og:title" content="OSEP a Victory" />
<meta property="og:description" content="So I just recently passed the PEN-300 course and got my OSEP. It was a truly fun but difficult journey. I wanted to briefly write a few things down before I forget them in hopes that they might help someone in the future.
The Timeline So, I will admit fault here; I slacked off for a bunch of months. I bought the course back in January and had a year-long access pass." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ilightthings.github.io/posts/osep-a-victory/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-23T07:39:32-04:00" />
<meta property="article:modified_time" content="2022-08-23T07:39:32-04:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://ilightthings.github.io/"><img class="app-header-avatar" src="/nice.jpg" alt="iLightThings" /></a>
      <h1>iLightThings: A site</h1>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/tags/">Tags</a>
      </nav>
      <p>Hello, my name is iLightThings, and this is a technical blog about my experiences and adventures in the world of cyber security, with a focus on redteaming, windows exploitation, network attacks, and custom tool designed.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/ILightThings" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>My Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">OSEP a Victory</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Aug 23, 2022
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          7 min read
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://ilightthings.github.io/tags/offsec/">offsec</a>
              <a class="tag" href="https://ilightthings.github.io/tags/osep/">OSEP</a>
              <a class="tag" href="https://ilightthings.github.io/tags/cert/">cert</a>
              <a class="tag" href="https://ilightthings.github.io/tags/personal/">personal</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>So I just recently passed the PEN-300 course and got my OSEP.  It was a truly fun but difficult journey. I wanted to briefly write a few things down before I forget them in hopes that they might help someone in the future.</p>
<h2 id="the-timeline">The Timeline</h2>
<p>So, I will admit fault here; I slacked off for a bunch of months. I bought the course back in January and had a year-long access pass. I initially dove into the material but as soon as I hit the .NET section, I was struggling hard. It was pretty demoralizing, as I was reading it over and over and just not getting it. I was going on and off for a few months until I finally decided that if I scheduled the exam, it would help me refocus myself to get through the painful sections of the material.</p>
<p>So July 1st hits, I re-setup my dedicated kali machine for the OSEP, and I start going through the material.</p>
<p>I set my exam to be on August 17th, which gives me 47 days to go from start to finish.</p>
<h2 id="the-setup">The Setup</h2>
<p>My setup was pretty simple.</p>
<ul>
<li>
<p>I have a dedicated kali machine on my ESXI server.</p>
</li>
<li>
<p>I would access it via SSH and using Visual Studio Code (SSH from my windows host) so I could edit my scripts and keep them safe from windows defender.</p>
<ul>
<li><img src="2022-08-23-09-10-43-image.png" alt=""></li>
</ul>
</li>
<li>
<p>Running commands, I would use MobaXterm as it would keep a log of my console output, provide a means of file transfer, and allow socks proxying for the web browser.</p>
<ul>
<li><img src="2022-08-23-09-02-17-image.png" alt=""></li>
</ul>
</li>
<li>
<p>If I needed to RDP into a windows lab host, MobaXterm allows for SSH network proxying, and I used that to RDP into offsecs environment. This allows me to copy and paste things right into the RDP session with little hassle.</p>
<ul>
<li><img src="2022-08-23-09-00-41-image.png" alt=""></li>
</ul>
</li>
<li>
<p>For note storage, I setup the OSEP folder to sync with a private repositiory.</p>
</li>
<li>
<p>This is also the host I used for my OSEP exam.</p>
</li>
</ul>
<p>Just a small note, I hate using the kali desktop environment I find it clunky, oobnoxious and there are always so many issues with openvm tools. Using everything over SSH made everything alot smoother.</p>
<h2 id="c-powershell-and-net---a-struggling-student">C#, Powershell, and .NET - A struggling student</h2>
<p>My biggest issue with the course came from the heavy focus on using .NET and CSharp. I don&rsquo;t think I would have had as much of an issue, but they kept introducing terminology and wouldn&rsquo;t spend much time explaining what they ment. After reading the chapter over any over, I still had no idea what a namespace was, how classes were referred to, what an <code>Add-type complimation</code> was about, or that assemblies were just compiled .NET code. I was very fortunate to have a friend help me with a few questions.</p>
<p>Thank you to <a href="https://twitter.com/Gr1mmie">@Grimme</a> and his expertise on .NET. Check his work at  <a href="https://grimmie.net/">https://grimmie.net/</a>. There was a good chance that this was explained well somewhere, but I just could not make heads or tails of it.</p>
<p><img src="2022-08-23-07-47-32-image.png" alt=""></p>
<p>Another huge help was <a href="https://grep.app/">grep.app</a>. For every code snippet that I did not understand, I was able to find out other projects that were using identical bits of code and learn how they implemented them.</p>
<p><img src="2022-08-23-07-55-44-image.png" alt=""></p>
<p>This did help alot when it came to supplemental training. Using grep.app helped me fully understand that some of the code Offsec was using, was purely for demonstration purposes, and which actually came in use. Example above is a screenshot of different uses of <code>New-Object System.Reflection.AssemblyName</code>.</p>
<p>If I am being honest, flow charts would have been a huge help for this kind of thing and I found myself building my own to help fully understand the topics.
<img src="2022-08-23-08-19-28-image.png" alt=""></p>
<p>Overall, although the content for C#/.NET/Powershell was thorough, I could not keep a firm grasp on a lot of it because of lack of prior knowledge.</p>
<h2 id="win32api-and-malware-evasion---a-fan-favourite">Win32API and Malware Evasion - A fan favourite</h2>
<p>I really enjoyed this section, although it falls trap to the previous issue of having a lot of things done in C#/.NET. I added this section because it was a personal favourite of mine.</p>
<p>So in my first go around, I didn&rsquo;t learn much. I realized that I was just copying and typing down the exact commands from exercisessies without fully knowing what I was typing.</p>
<p>The real progress start when I was listening to a friend talk about his red team engagements, and his language of choice was Nim. Nim is reasonably new and I am not going to get into it much,  but he focuses on the fact that calling WinAPI32 was a breeze. So I started rewriting my exercises in this section in Nim and boom. I started to really understand what each of the calls I was making, was actually doing. I understood what a handle was and started to make more advanced changes to the malware development stage of the PEN-300.</p>
<p><img src="2022-08-23-08-42-34-image.png" alt=""></p>
<p>I even took what I was learning in the course, and [contributed](<a href="https://github.com/byt3bl33d3r/OffensiveNim/pull/52">Create token_steal_cmd.nim by ILightThings · Pull Request #52 · byt3bl33d3r/OffensiveNim · GitHub</a>) back to the [offensive nim repo on github](<a href="https://github.com/byt3bl33d3r/OffensiveNim">GitHub - byt3bl33d3r/OffensiveNim: My experiments in weaponizing Nim (https://nim-lang.org/)</a>).</p>
<p><img src="2022-08-23-08-43-04-image.png" alt=""></p>
<p>But besides that, I was inspired to build my own shellcode encoder that wouldn&rsquo;t get picked up by antivirus or EDR on static inspection. I think I might make another post about the specifics about it. But regardless, of the malware, paired with both nim, and the custom-written encoder, this section was a lot of fun to work with.</p>
<h2 id="the-exam">The Exam</h2>
<p>Alright, so the exam. Obviously, I can not give a lot of details, but I think it brought the fun back in taking exams. Unlike the OSCP, I felt that the 48-hour time limit that they gave you was enough and the flow of the exam easily resembled an attack chain that I would see working on real engagements. A real overall improvement over taking the OSCP exam.</p>
<p>There were 2 attack paths that did get me stumped for about 7-9 hours total. One was complete my fault for not trying something very basic, and the other was just a completely foreign concept that was taught, just not in the context that was given to me. Kinda like being taught how a car engine works, repairing, diagnosing, and then for the exam, they throw you at a motorcycle engine.  Doable, but a lot more effort and research is required.</p>
<p>What I still slightly resent the 24-hour turnaround time after the exam for the report. I didn&rsquo;t personally feel great about the report I wrote. I was sleep deprived, my report didn&rsquo;t follow what I would normally write for clients. It was strictly:</p>
<ul>
<li>
<p>Show us the code you wrote for any programs you use</p>
</li>
<li>
<p>Show us the steps you took, that if we were to follow, would get the same result.</p>
</li>
<li>
<p>Show us the flags and screenshots of the flags.</p>
</li>
</ul>
<p>There are two ways of getting the certification. Get 100 points from the flags on the network, or get to <code>secret.txt</code>. I ended up getting to <code>secret.txt</code> in my 28th hour.</p>
<h2 id="result">Result</h2>
<p>After submitting my report at hour 22 after the exam, I got my pass notification 44 hours later. Which is a pretty considerable turnaround time.</p>
<p><img src="2022-08-24-09-17-24-image.png" alt=""></p>
<p>Over all, I would recommend the OSEP to anyone looking to specialize in windows active directory. It was a lot more focused and forgiving then the OSCP.</p>
<p><img src="2022-08-24-09-25-25-166134751468.png" alt=""></p>
<h3 id="support-and-thank-you">Support and Thank you</h3>
<p>I just wanted to thank a small group of people.</p>
<ul>
<li>
<p>Sam - For helping me with the linux shellcode generation exercise</p>
</li>
<li>
<p>Grimme - For helping me understand .NET and all the confusing terms.</p>
</li>
<li>
<p>Duc - A great coworker who help me stay sane when tackling the challenge labs</p>
</li>
<li>
<p>The people in the offsec discord. General nonsense those people are.</p>
</li>
<li>
<p>Em - Listening to my rambles and being a moral support.</p>
</li>
</ul>
<p>Thank you&hellip;&hellip;</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
